(()=>{"use strict";chrome.runtime.onMessage.addListener((e,o,t)=>"BACKGROUND_FETCH"===e.type?(async function(e){try{const o=await fetch(e.url,{method:e.method,headers:e.headers,body:e.body}),t={};let s;o.headers.forEach((e,o)=>{t[o]=e});const r=o.headers.get("content-type");return s=r&&r.includes("application/json")?await o.json():await o.text(),console.log(`[DAO Co-Pilot] Background fetch complete: ${o.status}`),{ok:o.ok,status:o.status,statusText:o.statusText,headers:t,data:s}}catch(e){throw console.error("[DAO Co-Pilot] Background fetch failed:",e),new Error(`Fetch failed: ${e.message}`)}}(e.data).then(t).catch(e=>{console.error("[DAO Co-Pilot] Background fetch error:",e),t({error:e.message,status:500})}),!0):"ANALYZE_PROPOSAL"===e.type?(async function(e){return console.log("[DAO Co-Pilot] Analyzing proposal:",e),{success:!0}}(e.data).then(t).catch(e=>{console.error("[DAO Co-Pilot] Analysis error:",e),t({error:e.message})}),!0):"PAYMENT_REQUIRED"===e.type?(async function(e){return console.log("[DAO Co-Pilot] Processing micropayment:",e),{success:!0,txHash:"0x..."}}(e.data).then(t).catch(e=>{console.error("[DAO Co-Pilot] Payment error:",e),t({error:e.message})}),!0):void 0),chrome.runtime.onInstalled.addListener(e=>{console.log("[DAO Co-Pilot] Extension installed:",e.reason),"install"===e.reason&&console.log("[DAO Co-Pilot] Welcome to DAO Governance Co-Pilot!")})})();